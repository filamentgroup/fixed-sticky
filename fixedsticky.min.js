/*! fixed-sticky - v0.1.3 - 2013-11-12
* Copyright (c) 2013 ; Licensed MIT */
(function(t,e){function i(t,e,i){var s=t+":",o=document.createElement("test"),n=o.style;return n.cssText=i?s+e:s+["-webkit-","-moz-","-ms-","-o-",""].join(e+";"+s)+e+";",-1!==n[t].indexOf(e)}var s={classes:{plugin:"fixedsticky",active:"fixedsticky-on",clone:"fixedsticky-dummy",withoutFixedFixed:"fixedsticky-withoutfixedfixed"},keys:{offset:"fixedStickyOffset",position:"fixedStickyPosition"},tests:{sticky:i("position","sticky"),fixed:i("position","fixed",!0)},getScrollTop:function(){var e="pageYOffset",i="scrollTop";return t?e in t?t[e]:t.document.documentElement[i]:t.document.body[i]},hasFixSticky:function(){return!(!s.tests.sticky&&s.tests.fixed&&(!t.FixedFixed||e(t.document.documentElement).hasClass("fixed-supported")))},update:function(t){if(t.offsetWidth){var i,o,n,c=e(t),d=c.outerHeight(),a=c.data(s.keys.offset),f=s.getScrollTop(),r=c.is("."+s.classes.active),u=function(t){c[t?"addClass":"removeClass"](s.classes.active)},l=e(window).height(),x=c.data(s.keys.position);a||(a=c.offset().top,c.data(s.keys.offset,a),c.after(e("<div>").addClass(s.classes.clone).height(d))),x||(i="auto"!==c.css("top")||"auto"!==c.css("bottom"),i||c.css("position","fixed"),x={top:"auto"!==c.css("top"),bottom:"auto"!==c.css("bottom")},i||c.css("position",""),c.data(s.keys.position,x)),o=parseInt(e(t).css("top"),10)||0,n=parseInt(e(t).css("bottom"),10)||0,x.top&&f+o>a||x.bottom&&a>f+l-(d||0)-n?r||u(!0):r&&u(!1)}},destroy:function(i){var o=e(i);if(!s.hasFixSticky())return e(t).unbind(".fixedsticky"),o.each(function(){e(this).removeData([s.keys.offset,s.keys.position]).removeClass(s.classes.active).nextUntil(s.classes.clone).remove()})},init:function(i){var o=e(i);if(!s.hasFixSticky())return o.each(function(){var i=this;e(t).bind("scroll.fixedsticky",function(){s.update(i)}).trigger("scroll.fixedsticky"),e(t).bind("resize.fixedsticky",function(){o.is("."+s.classes.active)&&s.update(i)})})}};t.FixedSticky=s,e.fn.fixedsticky=function(t){if("function"==typeof s[t])return s[t].call(s,this);if("object"!=typeof t&&t)throw Error("Method `"+t+"` does not exist on jQuery.fixedsticky");return s.init.call(s,this)},t.FixedFixed||e(t.document.documentElement).addClass(s.classes.withoutFixedFixed)})(this,jQuery);